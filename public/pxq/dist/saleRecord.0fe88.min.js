webpackJsonp([1],{281:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,d,c,i,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),f=a(3),m=s(f),h=a(16),g=(s(h),a(15),a(11)),y=a(21),_=a(26),E=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),p(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(0,g.is)((0,g.fromJS)(this.props),(0,g.fromJS)(e))||!(0,g.is)((0,g.fromJS)(this.state),(0,g.fromJS)(t))}},{key:"render",value:function(){return m.default.createElement("ul",{className:"team_list"},this.props.list.map(function(e,t){return m.default.createElement(v,u({key:t},e,{index:t}))}))}}]),t}(f.Component),v=(d=o=function(e){function t(e,a){l(this,t);var s=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return s.state={},s.deleleOrder=function(){s.context.getData("/sales/sales/deleteSales",{sales_id:s.props.sales_id},function(e){200==e.http_code?(s.context.deleteItem(s.props.index),y.Tool.alert(e.data.msg)):y.Tool.alert(e.msg)},"deleteItem")},s}return r(t,e),p(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(0,g.is)((0,g.fromJS)(this.props),(0,g.fromJS)(e))||!(0,g.is)((0,g.fromJS)(this.state),(0,g.fromJS)(t))}},{key:"render",value:function(){var e=this.props,t=e.created_at,a=e.customers_phone,s=e.customers_name,l=e.product,n=(e.product_price,e.commission),r=e.sales_money,o=e.type,d=(e.sales_id,e.index,e.content),c=void 0,i=void 0,u=t.split(":");return t=u[0]+":"+u[1],"FAILED"==o?(c=m.default.createElement("span",{className:"order_status1"},"未通过"),i=m.default.createElement("div",{className:"failed_reason clear"},m.default.createElement("span",{className:"left"},"未通过原因："),m.default.createElement("span",{className:"reason_content left"},d),m.default.createElement("span",{className:"right delete_order",onClick:this.deleleOrder},"删除"))):"UNAUDIT"==o?(c=m.default.createElement("span",{className:"order_status1"},"待审核"),i=m.default.createElement("div",{className:"failed_reason"},"等待管理员审核，审核通过后，佣金将结算至账户")):"PASS"==o&&(c=m.default.createElement("span",{className:"order_status2"},"已通过"),i=null),m.default.createElement("li",{className:"order_li"},m.default.createElement("header",null,"创建时间：",t,c),m.default.createElement("div",{className:"order_inform"},m.default.createElement("div",{className:"order_style"},m.default.createElement("span",null,"客",m.default.createElement("span",{style:{display:"inline-block",width:"1.3rem"}}),"户："),m.default.createElement("span",{style:{marginRight:"0.875rem"}},s),m.default.createElement("span",null,a)),m.default.createElement("div",{className:"order_style ellips"},m.default.createElement("span",null,"购买商品："),l.map(function(e,t){return m.default.createElement("span",{style:{marginRight:"0.875rem"},key:t},e.product_name)})),m.default.createElement("div",{className:"order_style"},m.default.createElement("span",null,"订单金额："),m.default.createElement("span",{style:{marginRight:"1.95rem",color:"red"}},"¥",r),m.default.createElement("span",null,"佣金："),m.default.createElement("span",{style:{color:"red"}},"¥",n))),i)}}]),t}(f.Component),o.contextTypes={deleteItem:m.default.PropTypes.any},d),P=(i=c=function(e){function t(e,a){l(this,t);var s=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return s.state={data:[],oldName:"waited",choosedClass:{waited:"team_choosed"},currentPage:1,totalPage:1,limit:20,shouldUpdata:!0},s.chooseStatus=function(e){var t=null;if(t=e.target.children[0]?e.target.children[0].getAttribute("name"):e.target.getAttribute("name"),t!==s.state.oldName){s.state.oldName=t,s.state.choosedClass={},s.state.choosedClass[t]="team_choosed",s.forceUpdate();var a="";"failed"==t?a="FAILED":"waited"==t?a="UNAUDIT":"passed"==t&&(a="PASS"),s.props.getData("/shopro/data/record.json",{page:1,type:a},function(e){200==e.http_code?s.setState({data:e.data.data,currentPage:1,totalPage:e.data.totalPage}):y.Tool.alert(e.data.msg)},"changeType")}},s.deleteInform=function(e){s.state.data.splice(e,1)},s.getNextPage=function(e){if(s.state.shouldUpdata){s.state.shouldUpdata=!1;var t="";"failed"==s.state.oldName?t="FAILED":"waited"==s.state.oldName?t="UNAUDIT":"passed"==s.state.oldName&&(t="PASS"),s.props.getData("/sales/sales/salesList",{page:e,type:t},function(t){s.state.currentPage=e,s.state.shouldUpdata=!0,200==t.http_code?(s.state.data=s.state.data.concat(t.data.data),s.setState(s.state.data)):y.Tool.alert(t.msg)},"nextPage")}},s}return r(t,e),p(t,[{key:"getChildContext",value:function(){return{deleteItem:this.props.deleteItem,getData:this.props.getData}}},{key:"componentWillReceiveProps",value:function(e){if(void 0!==e.saleRecord.index)this.deleteInform(e.saleRecord.index);else{var t=e.state.data;t&&(this.state.data=t.data.data||[],this.state.currentPage=t.data.currentPage||1,this.state.totalPage=t.data.totalPage||1)}}},{key:"componentWillUpdate",value:function(e,t){}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,g.is)((0,g.fromJS)(this.props),(0,g.fromJS)(e))||!(0,g.is)((0,g.fromJS)(this.state),(0,g.fromJS)(t))}},{key:"render",value:function(){return this.state.currentPage<this.state.totalPage&&y.Tool.nextPage(this.refs.Container,this.state.currentPage,this.state.totalPage,this.getNextPage,this.state.shouldUpdata),m.default.createElement("div",{ref:"Container",className:"component_container"},m.default.createElement(_.Header,{goback:!0,title:"销售记录"}),m.default.createElement("nav",{className:"team_nav"},m.default.createElement("ul",{className:"clear",onClick:this.chooseStatus},m.default.createElement("li",{className:this.state.choosedClass.failed},m.default.createElement("p",{name:"failed"},"未通过"),m.default.createElement("span",null)),m.default.createElement("li",{className:this.state.choosedClass.waited},m.default.createElement("p",{name:"waited"},"待审核"),m.default.createElement("span",null)),m.default.createElement("li",{className:this.state.choosedClass.passed},m.default.createElement("p",{name:"passed"},"已通过")))),this.state.data.length>0?m.default.createElement(E,{list:this.state.data}):null)}}]),t}(f.Component),c.propTypes={saleRecord:f.PropTypes.object.isRequired},c.childContextTypes={deleteItem:m.default.PropTypes.any,getData:m.default.PropTypes.any},i);t.default=(0,_.template)({id:"saleRecord",component:P,url:"/shopro/data/record.json",data:{page:1,type:"UNAUDIT"}})}});